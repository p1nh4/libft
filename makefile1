# Nome da biblioteca
NAME := libft.a

# Compilador e flags
CC := cc
C_FLAGS := -Wall -Wextra -Werror

# Archiver e flags
AR := ar
AR_FLAGS := -rcs

# Diretórios
INCLUDE_DIR := includes
SRC_DIR := srcs
OBJ_DIR := obj

# Inclui o diretório de headers
INCLUDE := -I$(INCLUDE_DIR)

# Lista dos arquivos .c
SRC := ft_isdigit.c ft_isalpha.c ft_isalnum.c

# Lista dos arquivos .o (obj)
OBJ := $(addprefix $(OBJ_DIR)/, $(SRC:.c=.o))

# Comando para remover arquivos
RM := rm -f

# Regra padrão
all: $(NAME)

# Cria a biblioteca a partir dos objetos
$(NAME): $(OBJ)
	$(AR) $(AR_FLAGS) $@ $^

# Compila os arquivos .c para .o
# Garante que o diretório obj exista antes da compilação
$(OBJ_DIR)/%.o: $(SRC_DIR)/%.c | $(OBJ_DIR)
	$(CC) $(C_FLAGS) $(INCLUDE) -c $< -o $@

# Cria o diretório obj se não existir
$(OBJ_DIR):
	mkdir -p $(OBJ_DIR)

# Remove arquivos objetos
clean:
	$(RM) $(OBJ)

# Remove tudo (objetos e biblioteca)
fclean: clean
	$(RM) $(NAME)

# Reconstrói tudo
re: fclean all

.PHONY: all clean fclean re

